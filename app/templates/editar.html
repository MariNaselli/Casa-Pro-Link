{% extends "base.html" %}
{% block content %}
<div class="container mt-4 mb-5 pb-5">

    <div class="d-flex align-items-center mb-3">
        <i class="bi bi-arrow-left fs-4 me-3" style="cursor: pointer;" onclick="window.history.back();" title="Volver"></i>
        <h2 class="mb-0">Editar Propiedad: {{ p.titulo }}</h2>
    </div>

    <form method="POST" class="card p-4 shadow-sm border-0">
        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label fw-medium">Título del Aviso</label>
                <input type="text" name="titulo" class="form-control" value="{{ p.titulo }}" required>
            </div>
            <div class="col-md-3 mb-3">
    <label class="form-label fw-medium">Precio</label>
    <div class="input-group">
        <select name="moneda" class="form-select" style="max-width: 90px;">
            <option value="ARS" {% if p and p.moneda == 'ARS' %}selected{% endif %}>ARS</option>
            <option value="USD" {% if p and p.moneda == 'USD' %}selected{% endif %}>USD</option>
        </select>
        <input type="number" name="precio" class="form-control" 
               value="{{ p.precio if p else '' }}" step="1" min="0" required>
    </div>
</div>
            <div class="col-md-3 mb-3">
                <label class="form-label fw-medium">Operación</label>
                <select name="operacion" class="form-select">
                    <option value="Venta" {% if p.operacion == 'Venta' %}selected{% endif %}>Venta</option>
                    <option value="Alquiler" {% if p.operacion == 'Alquiler' %}selected{% endif %}>Alquiler</option>
                </select>
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label fw-medium">Ubicación</label>
            <input type="text" name="ubicacion" class="form-control" value="{{ p.ubicacion }}">
        </div>

        <div class="row">
            <div class="col-md-4 mb-3">
                <label class="form-label fw-medium">Dormitorios</label>
                <input type="number" name="dormitorios" class="form-control" value="{{ p.dormitorios }}">
            </div>
            <div class="col-md-4 mb-3">
                <label class="form-label fw-medium">Baños</label>
                <input type="number" name="banios" class="form-control" value="{{ p.banios }}">
            </div>
            <div class="col-md-4 mb-3">
                <label class="form-label fw-medium">M2 Totales</label>
                <input type="number" name="m2_totales" class="form-control" value="{{ p.m2_totales }}">
            </div>
        </div>

        <div class="bg-light p-3 rounded mb-3 border">
            <h5 class="mb-3">Datos Internos (Solo tú ves esto)</h5>
            <div class="row">
                <div class="col-md-6">
                    <label class="form-label small">Nombre Propietario</label>
                    <input type="text" name="propietario_nombre" class="form-control" value="{{ p.propietario_nombre }}">
                </div>
                <div class="col-md-6">
                    <label class="form-label small">Teléfono Propietario</label>
                    <input type="text" name="propietario_tel" class="form-control" value="{{ p.propietario_tel }}">
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-between mt-4">
            {% if origen == 'ficha' %}
                <a href="{{ url_for('ficha', id=p.id) }}" class="btn btn-secondary px-4">Cancelar</a>
            {% else %}
                <a href="{{ url_for('home') }}" class="btn btn-secondary px-4">Cancelar</a>
            {% endif %}
            
            <button type="submit" class="btn btn-success px-4 fw-bold">Guardar Cambios</button>
        </div>
    </form>
</div>
{% endblock %}